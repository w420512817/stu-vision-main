variables:
  SONAR_TOKEN: "sqa_b1e4f148f0342963c630705d2c8ef36b5c01bb37"  # 在sonarqube中创建项目时生成的TOKEN
  SONAR_HOST_URL: "http://192.168.50.154:9000"
  GIT_DEPTH: 0
sonarqube-check:
  stage: test
  script:
    - sonar-scanner -X -Dsonar.qualitygate.wait=true -Dsonar.projectKey=edu-health-fe-vision # sonarqube中项目的标识
  allow_failure: true
  only: # 仅检测master合并请求和master分支代码提交，sonarqube-ce版本只支持分析master分支
    - merge_requests
    - develop
  tags:
    - sonar-edu-health
